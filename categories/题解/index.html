
<!DOCTYPE html>
<html lang="null">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="supernova">
    <title>分类: 题解 - supernova</title>
    <meta name="author" content="YuanJie Chen">
    
    
    <meta name="description">
<meta property="og:type" content="blog">
<meta property="og:title" content="supernova">
<meta property="og:url" content="http://github.com/sillyplus/categories/题解/index.html">
<meta property="og:site_name" content="supernova">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="supernova">
<meta name="twitter:description">
    
    
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css" type="text/css">
    <!--STYLES END-->
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">supernova</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="/#about">
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首页</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分类</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">标签</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">归档</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="/#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">搜索</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">关于</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    

<section class="postShorten-group main-content-wrap">
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/11/04/floyd-and-mincircle/">Floyd算法求最小环</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Tue Nov 04 2014 00:00:00 GMT+0800">
	
		    Nov 04, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <h1 id="Floyd算法求最小环">Floyd算法求最小环</h1><h2 id="算法思想">算法思想</h2><p>对于构成最小环的点集{x1, x2, …}，其中必定存在一个最大点xk，那么最小环的长度可以由<br> <code>dis[i][j]+m[j][xk]+m[xk][i]</code>来表示，其中i，j均在点集中且小于xk，dis[i][j]是i到j的最短路径。<br>因为xk是点集中最大的那个点，所以i到j的最短路径没有经过编号比xk更大的点。那么要求最小环的长度就可以由小到大<br>枚举一下xk就行了。</p>
<p>我们知道，floyd算法最外层每循环一次，就是由一个中间节点k更新点i到j的最短路径。k从小到大枚举，<br>就保证了循环到k的时候，当前i到j的最短路经过的最大节点只可能是k，这刚好满足上面提到的dis[i][j]的定义。<br>所以我们就可以愉快的使用floyd来求最小环了。</p>
<h2 id="例题">例题</h2><h3 id="vijos_P1046_观光旅游">vijos P1046 观光旅游</h3><p>很裸的描述了，直接求最小环就好了。</p>
<h3 id="Timus_1004-_Sightseeing_Trip">Timus 1004. Sightseeing Trip</h3><p>同上，不过要注意的就是，这个题目要求最小环的路径。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">110</span>;
<span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1e8</span>;

<span class="keyword">int</span> n, m, num, ans;
<span class="keyword">int</span> mp[MN][MN], dis[MN][MN], pre[MN][MN];
<span class="keyword">int</span> path[MN];

<span class="function"><span class="keyword">void</span> <span class="title">get_path</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{
    <span class="keyword">if</span> (pre[a][b]) {
        get_path(a, pre[a][b]);
        get_path(pre[a][b], b);
    } <span class="keyword">else</span> {
        path[num++] = a;
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) &amp;&amp; (n != -<span class="number">1</span>)) {
        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m);
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) {
            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n; j++) {
                mp[i][j] = INF;
                dis[i][j] = INF;
                pre[i][j] = <span class="number">0</span>;
            }
        }
        <span class="keyword">int</span> a, b, l;
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) {
            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;l);
            mp[a][b] = min(mp[a][b], l);
            mp[b][a] = dis[a][b] = dis[b][a] = mp[a][b];
        }
        ans = INF;
        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; k++) {
            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; k; i++)
                <span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; k; j++) {
                    <span class="keyword">int</span> tmp = dis[i][j] + mp[j][k] + mp[k][i];
                    <span class="keyword">if</span> (tmp &lt; ans) {
                        ans = tmp;
                        num = <span class="number">0</span>;
                        get_path(i, j);
                        path[num++] = j;
                        path[num++] = k;
                    }
                }

            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)
                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) {
                    <span class="keyword">int</span> tmp = dis[i][k] + dis[k][j];
                    <span class="keyword">if</span> (dis[i][j] &gt; tmp) {
                        dis[i][j] = tmp;
                        pre[i][j] = k;
                    }
                }
        }
        <span class="keyword">if</span> (ans == INF) {
            <span class="built_in">cout</span> &lt;&lt; <span class="string">"No solution."</span> &lt;&lt; endl;
        } <span class="keyword">else</span> {
            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++)
                <span class="built_in">printf</span>(<span class="string">"%d "</span>, path[i]);
            <span class="built_in">cout</span> &lt;&lt; endl;
        }
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/11/04/floyd-and-mincircle/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/25/tyvj-p1143/">Tyvj_P1143 - 飘飘乎居士的约会</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Fri Jul 25 2014 08:40:48 GMT+0800">
	
		    Jul 25, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>背景 Background</p>
<p>一阵狂风吹过<br>只听“pong”的一声，飘飘乎居士降落了！！！<br>描述 Description</p>
<p>又是美妙的一天，这天飘飘乎居士要和MM约会，因此他打扮的格外帅气。但是，因为打扮的时间花了太久，离约会的时间已经所剩无几。<br>幸运的是，现在飘飘乎居士得到了一张n<em>m的地图，图中左上角是飘飘乎居士的位置，右下角是约会的地点。‘.’代表马路，‘</em>’代表房屋。飘飘乎居士只能沿着‘.’行走（也就是不能踏入‘<em>’），而且行走的方向只能为上下左右的相邻格子。为了不让MM等待太久，飘飘乎居士在整个过程中可能会使用一次飘飘神功（也可能不使用，但最多使用一次），使用飘飘神功后，飘飘乎居士可以走进房屋一次（也就是在全程的行走中最多可以走一个‘</em>’,注意，只有一个）；<br>现在飘飘乎居士想要知道最少需要走多少步，飘飘乎居士才能到达约会的地点。<br>输入格式 InputFormat</p>
<p>第一行，2个正整数 n和m，表示一个n<em>m的矩阵<br>接下来n行，每行m个字符，字符一定为 ’.’ 或者是‘</em>’ ，分别代表马路和房屋。<br>输入数据保证左上角和右下角都为‘.’<br>输出格式 OutputFormat</p>
<p>一行，如果可以到达，则输入需要行走的最少步数（飘飘神功也记为一步）<br>如果不可以到达，则输出‘no’<br>样例输入 SampleInput [复制数据]</p>
<p>样例输入1<br>3 3<br>.*.<br>…<br>…</p>
<p>样例输入2<br>3 3<br>.**</p>
<hr>
<p>**.<br>样例输出 SampleOutput [复制数据]</p>
<p>样例输入1<br>4</p>
<p>样例输入2<br>no<br>数据范围和注释 Hint</p>
<p>0&lt;N M &lt;=1000<br>来源 Source</p>
<p>飘飘乎居士——violet hill</p>
<p>//————————————————————–</p>
<p>这道我的做法是分别由起点和终点开始，做两遍bfs，求出各自到其它点的最短距离，然后枚举使用飘飘神功的点，如果起点和终点都可以到达与该点相连并且相异的点就更新一下答案</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">1010</span>;

<span class="keyword">struct</span> pos{
    <span class="keyword">int</span> x, y, deep;
};

<span class="built_in">queue</span>&lt;pos&gt; q;

<span class="keyword">bool</span> vis[MN][MN];
<span class="keyword">int</span> a[MN][MN], b[MN][MN];
<span class="keyword">char</span> c[MN][MN];
<span class="keyword">int</span> n, m;
<span class="keyword">int</span> dx[] = {<span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>};
<span class="keyword">int</span> dy[] = {-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>};

<span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(pos t)</span> </span>{
    <span class="keyword">bool</span> ret = (t.x &gt;= <span class="number">0</span> &amp;&amp; t.y &gt;= <span class="number">0</span> &amp;&amp; t.x &lt; n &amp;&amp; t.y &lt; m);
    <span class="keyword">if</span> (ret) {
        <span class="keyword">if</span> (vis[t.x][t.y] || (c[t.x][t.y] == <span class="string">'*'</span>)) ret = <span class="literal">false</span>;
    }
    <span class="keyword">return</span> ret;
}

<span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(pos sr, <span class="keyword">int</span> d[][MN])</span> </span>{
    <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));
    <span class="keyword">while</span> (!q.empty()) q.pop();
    q.push(sr);
    vis[sr.x][sr.y] = <span class="literal">true</span>;
    d[sr.x][sr.y] = sr.deep;
    <span class="keyword">while</span> (!q.empty()) {
        pos now, next;
        now = q.front();
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) {
            next.x = now.x + dx[i];
            next.y = now.y + dy[i];
            <span class="keyword">if</span> (check(next)) {
                next.deep = now.deep+<span class="number">1</span>;
                d[next.x][next.y] = next.deep;
                q.push(next);
                vis[next.x][next.y] = <span class="literal">true</span>;
            }
        }
        q.pop();
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)
        <span class="built_in">cin</span> &gt;&gt; c[i];
    <span class="built_in">memset</span>(a, <span class="number">63</span>, <span class="keyword">sizeof</span>(a));
    <span class="built_in">memset</span>(b, <span class="number">63</span>, <span class="keyword">sizeof</span>(b));
    <span class="keyword">int</span> INF = a[<span class="number">0</span>][<span class="number">0</span>]; <span class="comment">//!!!!!!</span>
    pos sro, orz, l, r;
    sro.x = sro.y = sro.deep = <span class="number">0</span>;
    orz.x = n-<span class="number">1</span>, orz.y = m-<span class="number">1</span>, orz.deep = <span class="number">0</span>;
    bfs(sro, a);
    bfs(orz, b);
    <span class="keyword">int</span> ans = INF;
    ans = min(ans, a[n-<span class="number">1</span>][m-<span class="number">1</span>]);
    <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++) <span class="keyword">if</span> (c[i][j] == <span class="string">'*'</span>) {
            <span class="keyword">for</span> (<span class="keyword">int</span> p = <span class="number">0</span>; p &lt; <span class="number">4</span>; p++) {
                l.x = i+dx[p], l.y = j+dy[p];
                <span class="keyword">if</span> (check(l))
                    <span class="keyword">for</span> (<span class="keyword">int</span> q = <span class="number">0</span>; q &lt; <span class="number">4</span>; q++) <span class="keyword">if</span> (p != q) {
                        r.x = i+dx[q], r.y = j+dy[q];
                        <span class="keyword">if</span> (check(r)) {
                            ans = min(ans, a[l.x][l.y]+b[r.x][r.y]+<span class="number">2</span>);
                        }
                    }
            }
        }
    }
    <span class="keyword">if</span> (ans != INF)
        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; endl;
    <span class="keyword">else</span>
        <span class="built_in">cout</span> &lt;&lt; <span class="string">"no"</span> &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/25/tyvj-p1143/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/16/tyvj_p1309/">Tyvj_P1309_刷题的玖君</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Wed Jul 16 2014 14:40:33 GMT+0800">
	
		    Jul 16, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>描述 Description</p>
<p>某一天在网上闲逛的玖君不小心发现了TYVJ，就立刻被TYVJ吸引住了，果断驻扎下来。玖君决定按照顺序来切题，因为离复赛越来越近了，所以他希望能够用最短时间AC掉前面N道题目，完成第i道题目玖君需要花费t[i]个单位的代价。玖君做题有个特点，他喜欢看完几道题后，一次把几道题的代码写完。如果玖君决定一次写完从编号L到编号R的题目，那么他完成这些题目的总代价等于编号L到R题目的代价之和与R之积，即SUM{t[L..R]} <em>R。此外每道题在被切之前都会等待被切，等待的时间，也被算在代价里面，对于每个第k次被切的题，在它被切之前的等待代价为(k-1)</em>S。综上，切完N道题的总代价=第1次切题的代价+第2次切题的代价+…+第k次切题的代价+每道题的等待代价。现在我们想知道玖君切完这N道题目的最小代价。<br>输入格式 InputFormat</p>
<p>第1行：2个用空格分开的整数N, S<br>第2行：N个用空格分开的整数，分别表示t[1]到t[N]<br>输出格式 OutputFormat</p>
<p>第1行：1个整数，表示玖君完成N道题的最小代价<br>样例输入 SampleInput [复制数据]</p>
<p>4 7<br>8 1 7 6<br>样例输出 SampleOutput [复制数据]</p>
<p>79<br>数据范围和注释 Hint</p>
<p>[样例解释]<br>第1次切1、2、3题：代价为48<br>第2次切4题：代价为24<br>其中每道题的等待时间代价为:0,0,0,7<br>共计48 + 24 + 7 = 79</p>
<p>[数据范围]<br>对于70%的数据，1 &lt;= N &lt;= 3000<br>对于100%的数据，1 &lt;= N &lt;= 30000<br>对于100%的数据，1 &lt;= S,t[i] &lt;= 100</p>
<p>Dp，然后先求前缀和数组，方便后面用到，设f[i]表示刷完前i个题所花费的最小代价，然后一个比较容易想到的方程就是</p>
<ul>
<li>f[i]=min{f[j]+(sum[i]-sum[j])<em>i+(n-i)</em>S|0&lt;=j&lt;i} //shiugaosuyixiawo(n-i)*sshisuanfeiyongtiqianjisuanma?</li>
</ul>
<p>然后这个显然当N＝30000时是不行的，会T，然后就发现，设用k更新i比用j更优，则</p>
<ul>
<li>f[k] + (sum[i]-sum[k]) <em> i + (n-i)</em>s &gt;=f[j] + (sum[i]-sum[j]) <em> i + (n-i)</em>s</li>
</ul>
<ul>
<li>(f[k]-f[j])/(sum[k]-sum[j])&lt;=i</li>
</ul>
<p>当满足这个条件时，k优于j ，然后就维护一个队列就行了，这个是所谓的斜率优化？还是得好好消化啊，dp水平太次了我。。。</p>
<pre><code><span class="comment">#include &lt;iostream&gt;</span>
<span class="comment">#include &lt;cstdio&gt;</span>
<span class="comment">#include &lt;cmath&gt;</span>

using namespace std;

typedef long long LL;

const <span class="keyword">int</span> MN = <span class="number">30010</span>;

LL n, <span class="keyword">s</span>;
LL f[MN];
LL sum[MN];
<span class="keyword">int</span> <span class="string">q[MN]</span>;

double grad(<span class="keyword">int</span> j, <span class="keyword">int</span> k) {
    <span class="keyword">return</span> ((f[k]-f[j])*<span class="number">1.0</span> / (sum[k]-sum[j]));
}

<span class="keyword">int</span> main() {
    cin &gt;&gt; n &gt;&gt; <span class="keyword">s</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {
        scanf(<span class="string">"<span class="variable">%lld</span>"</span>, &amp;sum[i]);
        sum[i] += sum[i-<span class="number">1</span>];
    }
    <span class="keyword">int</span> h = <span class="number">1</span>, t = <span class="number">1</span>;
    f[<span class="number">0</span>] = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {
        <span class="keyword">while</span> ((h &lt; t) &amp;&amp; (grad(<span class="string">q[h]</span>, <span class="string">q[h+1]</span>) &lt;= i)) ++h;
        f[i] = f[<span class="string">q[h]</span>] + (sum[i]-sum[<span class="string">q[h]</span>])*i + (n-i)*<span class="keyword">s</span>;
        <span class="keyword">while</span> ((h &lt; t) &amp;&amp; (grad(<span class="string">q[t-1]</span>, <span class="string">q[t]</span>) &gt;= grad(<span class="string">q[t]</span>, i))) --t;
        <span class="string">q[++t]</span> = i;
    }
    cout &lt;&lt; f[n] &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/16/tyvj_p1309/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/16/tyvj_p1064_p1404/">Tyvj_P1064_P1404_旧题</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Wed Jul 16 2014 10:20:15 GMT+0800">
	
		    Jul 16, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>这两道题都是从我开始接触tyvj的时候就看过的，可是一直没去写，今天终于。。。</p>
<p>P1064 - 新三国争霸</p>
<p>描述 Description<br>PP 特别喜欢玩即时战略类游戏，但他觉得那些游戏都有美中不足的地方。灾害总不降临道路，而只降临城市，而且道路不能被占领，没有保护粮草的真实性。于是他就研发了《新三国争霸》。<br>在这款游戏中，加入灾害对道路的影响（也就是一旦道路W[i，j]受到了灾害的影响，那么在一定时间内，这条路将不能通过）和道路的占领权（对于一条道路W[i，j]，至少需要K[i，j]个士兵才能守住）。<br>PP可真是高手，不一会，就攻下了N-1座城市，加上原来的就有N座城市了，但他忽略了一点……那就是防守同样重要，不过现在还来的及。因为才打完仗所以很多城市都需要建设，PP估算了一下，大概需要T天。他现在无暇分身进攻了，只好在这T天内好好的搞建设了。所以他秒要派士兵占领一些道路，以确保任何两个城市之间都有路（不然敌人就要分而攻之了，是很危险的）。士兵可不是白干活的，每个士兵每天都要吃掉V的军粮。因为有灾害，所以方案可能有变化（每改变一次就需要K的军粮，初始方案也需要K的军粮）。<br>因为游戏是PP编的，所以他知道什么时候有灾害。PP可是一个很节约的人，他希望这T天在道路的防守上花最少的军粮。<br>N&lt;=300，M&lt;=5000 ，T&lt;=50；</p>
<p>输入格式 InputFormat<br>第一行有5个整数N，M，T，V，K。N表示有城市数，M表示道路数，T表示需要修养的天数，V表示每个士兵每天吃掉的军粮数，K表示修改一次花掉的军粮数。<br>以下M行，每行3个数A，B，C。表示A与B有一条路（路是双向的）需要C个士兵才能守住。<br>第M+2行是一个数P，表示有P个灾害。<br>以下P行，每行4个数，X，Y，T1，T2。表示X到Y的这条路，在T1到T2这几天都会受灾害。</p>
<p>输出格式 OutputFormat<br>T天在道路的防守上花费最少的军粮。</p>
<p>样例输入 SampleInput [复制数据]<br>3 3 5 10 30<br>1 2 1<br>2 3 2<br>1 3 4<br>1<br>1 3 2 5<br>样例输出 SampleOutput [复制数据]<br>180<br>个人感觉一道不错的动态规划题吧，一直不敢下手写，写完真是心旷神怡啊～～<br>设F[i]表示前i天的最少花费，则有<br>F[i] = min(F[i], F[j-1] + mt<em>(i-j+1)</em>v+k)<br>其中，mt表示第j天到第i天的最少花费，也就是在第j天到第i天可通行的道路求一遍最小生成树，一开始我是认为必须在第j天到第i天均不能通行的才不用排兵去收，不过事实好像是只要这期间道路遭遇灾害就可以不用派兵把守了。还是说是我没读懂题意</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MM = <span class="number">5050</span>;
<span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1000000000</span>;

<span class="keyword">struct</span> edge{
    <span class="keyword">int</span> x, y, w;
    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> edge &amp; a) <span class="keyword">const</span> {
        <span class="keyword">return</span> w &lt; a.w;
    }
} e[MM];

<span class="keyword">int</span> n, m, t, v, k, p;
<span class="keyword">bool</span> can[MM], road[MM][MM];
<span class="keyword">int</span> f[MM/<span class="number">10</span>], fa[MM];

<span class="function"><span class="keyword">int</span> <span class="title">getfa</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    <span class="keyword">return</span> (fa[x] == x ? x : fa[x] = getfa(fa[x]));
}

<span class="function"><span class="keyword">int</span> <span class="title">kruskal</span><span class="params">(<span class="keyword">int</span> t1, <span class="keyword">int</span> t2)</span> </span>{
    <span class="built_in">memset</span>(can, <span class="literal">true</span>, <span class="keyword">sizeof</span>(can));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">for</span> (<span class="keyword">int</span> j = t1; j &lt;= t2; j++)
            <span class="keyword">if</span> (!road[i][j]) {
                can[i] = <span class="literal">false</span>;
                <span class="keyword">break</span>;
            }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        fa[i] = i;
    <span class="keyword">int</span> ret = <span class="number">0</span>, cnt = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">if</span> (can[i]) {
            <span class="keyword">int</span> f1 = getfa(e[i].x);
            <span class="keyword">int</span> f2 = getfa(e[i].y);
            <span class="keyword">if</span> (f1 != f2) {
                fa[f1] = f2;
                ret += e[i].w;
                cnt++;
                <span class="keyword">if</span> (cnt == n-<span class="number">1</span>)
                    <span class="keyword">return</span> ret;
            }
        }
    <span class="keyword">return</span> INF;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; t &gt;&gt; v &gt;&gt; k;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;e[i].x, &amp;e[i].y, &amp;e[i].w);
    sort(e+<span class="number">1</span>, e+<span class="number">1</span>+m);
    <span class="built_in">cin</span> &gt;&gt; p;
    <span class="built_in">memset</span>(road, <span class="literal">true</span>, <span class="keyword">sizeof</span>(road));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; p; i++) {
        <span class="keyword">int</span> x, y, t1, t2;
        <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;x, &amp;y,&amp;t1, &amp;t2);
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)
            <span class="keyword">if</span> (((e[j].x == x) &amp;&amp; (e[j].y == y)) || ((e[j].x == y) &amp;&amp; (e[j].y == x))) {
                <span class="keyword">for</span> (<span class="keyword">int</span> tt = t1; tt &lt;= t2; tt++)
                    road[j][tt] = <span class="literal">false</span>;
            }
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++)
        f[i] = INF;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++)
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)
            f[i] = min(f[i], f[j-<span class="number">1</span>]+kruskal(j, i)*(i-j+<span class="number">1</span>)*v+k);
    <span class="built_in">cout</span> &lt;&lt; f[t] &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>P1404 - [NOIP2010]引水入城</p>
<p>noip的题目，所以网上一堆题解，所以就贴一下自己的代码就好了</p>
<p>主要就是由一个证明说某蓄水池在最后一排城市可到达的是一个连续的区间，然后就可以从第一排开始dfs求出对应区间的左右边界，然后就是一个最小区间覆盖吧，然后数据好像之后500，DP一下就行，然后好像关于最小区间覆盖的话是有一个贪心的解法。以后再想想看。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">510</span>;

<span class="keyword">int</span> n, m, root;
<span class="keyword">int</span> dx[] = {<span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>};
<span class="keyword">int</span> dy[] = {-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>};
<span class="keyword">int</span> a[MN][MN];
<span class="keyword">int</span> l[MN], r[MN], f[MN];
<span class="keyword">bool</span> vis[MN][MN];
<span class="keyword">bool</span> last[MN];

<span class="function"><span class="keyword">bool</span> <span class="title">ck</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{
    <span class="keyword">return</span> (x &gt; <span class="number">0</span> &amp;&amp; y &gt; <span class="number">0</span> &amp;&amp; x &lt;= n &amp;&amp; y &lt;= m);
}

<span class="function"><span class="keyword">void</span> <span class="title">sc</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{
    vis[x][y] = <span class="literal">true</span>;
    <span class="keyword">if</span> (x == n) {
        last[y] = <span class="literal">true</span>;
        l[root] = min(l[root], y);
        r[root] = max(r[root], y);
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) {
        <span class="keyword">int</span> tx = x + dx[i];
        <span class="keyword">int</span> ty = y + dy[i];
        <span class="keyword">if</span> (ck(tx, ty)) {
            <span class="keyword">if</span> ((a[x][y] &gt; a[tx][ty]) &amp;&amp; (!vis[tx][ty]))
                sc(tx, ty);
        }
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)
        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)
            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][j]);
    <span class="built_in">memset</span>(last, <span class="literal">false</span>, <span class="keyword">sizeof</span>(last));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MN; i++)
        l[i] = MN;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">if</span> ((a[<span class="number">1</span>][i] &gt;= a[<span class="number">1</span>][i-<span class="number">1</span>]) &amp;&amp; (a[<span class="number">1</span>][i] &gt;= a[<span class="number">1</span>][i+<span class="number">1</span>])) {
            <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));
            root = i;
            sc(<span class="number">1</span>, i);
    }
    <span class="keyword">int</span> ans = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">if</span> (!last[i]) ans++;
    <span class="keyword">if</span> (ans) {
        <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; endl &lt;&lt; ans &lt;&lt; endl;
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    f[<span class="number">0</span>] = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        f[i] = MN;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">for</span> (<span class="keyword">int</span> j = l[i]; j &lt;= r[i]; j++)
            f[j] = min(f[j], f[l[i]-<span class="number">1</span>] + <span class="number">1</span>);
    <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; endl;
    <span class="built_in">cout</span> &lt;&lt; f[m] &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/16/tyvj_p1064_p1404/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/06/tyvj_p1253/">Tyvj_P1253 - 无聊的战争</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sun Jul 06 2014 11:51:11 GMT+0800">
	
		    Jul 06, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>描述 Description</p>
<p>ForeverBell不仅精通破译密码,更是我军的重要代码编写者(至于什么代码,自己想吧).战争的日子是无聊的,有一天,ForeverBell找到了treeboy,出了一个极其简单的问题:给定一段序列,找出这段数列中第k小的数.<br>为了照顾treeboy的超弱语文水平,ForeverBell极其耐心地解释了这个问题:给定一个整数数列num[1…n],序列中的每个数字都不相同.你需要回答一组格式为Q(i,j,k)的查询,表示”在num[i…j]中第k小的数是多少”.<br>由于treeboy不仅语文差,而且代码能力巨弱,所以再次找到了你,请你编写一个程序,应对ForeverBell的询问.<br>输入格式 InputFormat</p>
<p>第一行两个整数n,m.分别是数列的总长度和ForeverBell询问的次数. 1≤n≤100 000，1≤m≤5 000<br>第二行有n个数，代表数列的元素，所有数都不相同，而且不会超过10^9 。<br>接下来有m行，每行三个整数i、j、k，代表一次查询，i、j、k满足：1≤i≤j≤n， 1≤k≤j-i+1。<br>输出格式 OutputFormat</p>
<p>一共m行.第i行表示第i次询问的答案.<br>样例输入 SampleInput [复制数据]</p>
<p>7 3<br>1 5 2 6 3 7 4<br>2 5 3<br>4 4 1<br>1 7 3<br>样例输出 SampleOutput [复制数据]</p>
<p>5<br>6<br>3</p>
<p>这道题算是模版题吧，看了一下说是什么划分树，不懂。。。然后就百度了一下，然后发现百度上的模版直接就能用了，然后就学习了一下，然后我打算把百度百科上的说明copy下来这里方便查阅。。。</p>
<p>划分树是一种基于线段树的数据结构。主要用于快速求出(在log(n)的时间复杂度内）序列区间的第k大值</p>
<h4 id="1简介"><strong>1简介</strong></h4><p>查找整序列的第k大值往往采用快速查找法。然而此方法会破坏原序列，并且需要O(n)的时间复杂度。抑或使用二叉平衡树进行维护，此方法每次查找时间复杂度仅为O(logn)。然而此方法丢失了原序列的顺序信息，无法查找出某区间内的第k大值。</p>
<p>划分树的基本思想就是对于某个区间，把它划分成两个子区间，左边区间的数小于右边区间的数。查找的时候通过记录进入左子树的数的个数，确定下一个查找区间，最后范围缩小到1，就找到了。</p>
<h4 id="2建树"><strong>2建树</strong></h4><p>建树的过程比较简单，对于区间[l,r]，首先通过对原数组的排序找到这个区间的中位数a[mid]，小于a[mid]的数划入他的左子树[l,mid-1]，大于它的划入右子树[mid,r]。同时，对于第i个数，记录在[l,i]区间内有多少数被划入左子树。最后，对它的左子树区间[l,mid-1]和右子树区间[mid,r]递归的继续建树就可以了。<br>建树的时候要注意对于被分到同一子树的元素，元素间的相对位置不能改变。</p>
<h4 id="3查找"><strong>3查找</strong></h4><p>查找的过程中主要问题就是确定将要查找的区间。这个问题有些麻烦。</p>
<p>先看一下查找过程tree_find.他的定义如下：</p>
<p>查找深度为h，在大区间[st,ed]中找小区间[s,e]中的第k元素。<br>再看看他是如何工作的。我们的想法是，先判断[s,e]中第k元素在[st,ed]的哪个子树中，然后找出对应的小区间和k，递归的进行查找，直到小区间的s=e为止。<br>那如何解决这个问题呢？这时候前面记录的进入左子树的元素个数就派上用场了。通过之前的记录可以知道，在区间[st,s-1]中有el[h,s-1]进入左子树，记它为l。同理区间[st,e]中有el[h,e]个数进去左子树，记它为r。所以，我们知道区间小区间[s,e]中有(r-l)个数进入左子树。那么如果(r-l)&gt;=k，那么就在左子树中继续查找，否则就在右子树中继续查找。<br>接着解决查找的小区间的问题。<br>如果接下来要查找的是左子树，那么小区间应该是[st+([st,s-1]区间进入左子树的个数),st+([st,e]区间内进入左子树的个数)-1]，即区间[st+l,st+r-1]。显然，这里k不用变。<br>如果接下来要查找的是右子树，那么小区间应该是[mid+([st,s-1]区间中进入右子树的个数),mid+([st,e]区间进入右子树的个数)-1]。即区间[mid+(s-st-l),mid+(e-st-r)]。显然，这里k要减去区间里已经进入左子树的个数，即k变为k-(r-l)。<br>于是递归继续查找直到s=e即可。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="preprocessor">#<span class="keyword">define</span> N <span class="number">100500</span></span>
<span class="preprocessor">#<span class="keyword">define</span> MID ((l+r)&gt;&gt;<span class="number">1</span>)</span>

<span class="keyword">int</span> a[N], s[N], t[<span class="number">20</span>][N], num[<span class="number">20</span>][N], n, m;

<span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> c, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>{
    <span class="keyword">int</span> lm = MID-l+<span class="number">1</span>, lp = l, rp = MID+<span class="number">1</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= MID; i++)
        lm -= s[i] &lt; s[MID];
    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) {
        <span class="keyword">if</span> (i == l)
            num[c][i] = <span class="number">0</span>;
        <span class="keyword">else</span>
            num[c][i] = num[c][i-<span class="number">1</span>];
        <span class="keyword">if</span> (t[c][i] == s[MID]) {
            <span class="keyword">if</span> (lm) {
                lm--;
                num[c][i]++;
                t[c+<span class="number">1</span>][lp++] = t[c][i];
            } <span class="keyword">else</span> {
                t[c+<span class="number">1</span>][rp++] = t[c][i];
            }
        } <span class="keyword">else</span> <span class="keyword">if</span> (t[c][i] &lt; s[MID]) {
            num[c][i]++;
            t[c+<span class="number">1</span>][lp++] = t[c][i];
        } <span class="keyword">else</span> {
            t[c+<span class="number">1</span>][rp++] = t[c][i];
        }
    }
    <span class="keyword">if</span> (l &lt; r) {
        Build(c+<span class="number">1</span>, l, MID);
        Build(c+<span class="number">1</span>, MID+<span class="number">1</span>, r);
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> c, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> ql, <span class="keyword">int</span> qr, <span class="keyword">int</span> k)</span> </span>{
    <span class="keyword">if</span> (l == r)
        <span class="keyword">return</span> t[c][l];
    <span class="keyword">int</span> s, ss;
    <span class="keyword">if</span> (l == ql) {
        s = <span class="number">0</span>;
        ss = num[c][qr];
    } <span class="keyword">else</span> {
        s = num[c][ql-<span class="number">1</span>];
        ss = num[c][qr] - num[c][ql-<span class="number">1</span>];
    }
    <span class="keyword">if</span> (k &lt;= ss)
        <span class="keyword">return</span> Query(c+<span class="number">1</span>, l, MID, l+s, l+s+ss-<span class="number">1</span>, k);
    <span class="keyword">else</span>
        <span class="keyword">return</span> Query(c+<span class="number">1</span>, MID+<span class="number">1</span>, r, MID+<span class="number">1</span>+ql-l-s, MID+<span class="number">1</span>+qr-l-s-ss, k-ss);
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {
        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);
        s[i] = t[<span class="number">0</span>][i] = a[i];
    }
    sort(s+<span class="number">1</span>, s+<span class="number">1</span>+n);
    Build(<span class="number">0</span>, <span class="number">1</span>, n);
    <span class="keyword">while</span> (m--) {
        <span class="keyword">int</span> l, r, k;
        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;l, &amp;r, &amp;k);
        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, Query(<span class="number">0</span>, <span class="number">1</span>, n, l, r, k));
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/06/tyvj_p1253/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/05/timus_1008_image-encoding/">Timus_1008_Image Encoding</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sat Jul 05 2014 15:37:28 GMT+0800">
	
		    Jul 05, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>我应该怎么说这道题好呢，只能怪自己英语没有学好吧T^T，为什么造福小众，我决定不翻译题意了，大家自己看吧。。。。</p>
<p>There are several ways to encode an image. In this problem we will consider two representations of an image. We assume that the image consists of black and white pixels. There is at least one black pixel and all black pixels are connected with their sides. Coordinates of black pixels are not less than 1 and not greater than 10. An example of such an image is at the figure.</p>
<p>Both representations describe arrangement of black pixels only.</p>
<p>At the first representation we specify in the first line number of black pixels and coordinates of each black pixel in the following lines. Pixels are listed in order of increasing X. In case of equality of X they are listed in order of increasing Y. Image at the figure is encoded as follows:</p>
<p><strong>6<br>2 3<br>2 4<br>3 3<br>3 4<br>4 2<br>4 3
</strong></p>
<p>At the second representation we specify in the first line coordinates of the lowest left black pixel. Each of the following lines contains a description of neighbors for one of the pixels. At first, neighbors of the lowest left pixel are specified, then neighbors of its first neighbor (if it exists) are specified, then neighbors of its second neighbor (if it also exists) follow. When all its neighbors are described the description of the neighbors of its first neighbor follows. The description of the neighbors of its second neighbor follows then and so on.</p>
<p>Each descriptive line contains at most one letter for each neighbor: R for the right, T for the top, L for the left, B for the bottom. If the neighbor was already specified it is not included into the descriptive line and vice-versa. Also there is only one descriptive line for each pixel. Neighbors are listed counter-clockwise starting with the right. Each descriptive line except the last ends with a comma. The last line ends with a full stop. Image at the figure is encoded as follows:</p>
<p><strong>2 3<br>RT,<br>RT,<br>,<br>B,<br>,<br>.
</strong></p>
<p>There are no leading or tailing spaces in any representation. There is exactly one space between X and Y coordinates.</p>
<h3 id="Input">Input</h3><p>One representation of the image will be given to your program in the input.</p>
<h3 id="Output">Output</h3><p>Your program has to write other representation of the image to the output.</p>
<h3 id="Sample">Sample</h3><table class="sample"><br><tbody><br><tr><br>input<br>output<br></tr><br><tr><br><br><td><br><br><br>    6<br>    2 3<br>    2 4<br>    3 3<br>    3 4<br>    4 2<br>    4 3<br><br><br><br><br></td><br><br><td><br><br><br>    2 3<br>    RT,<br>    RT,<br>    ,<br>    B,<br>    ,<br>    .<br><br><br><br><br></td><br></tr><br></tbody><br></table>


<p><strong>Problem Source: </strong>Third Open USTU Collegiate Programming Contest (PhysTech Cup), March 18, 2000</p>
<p>我只想说重点在最后几句话。。可能只有我没看清楚吧。。。。</p>
<p>看懂题意之后就会发现整个转换的过程其实就是bfs吧，然后就硬上了。一开始我由于没看清楚题意只写了一个转换，wa了几次，后来经过谷哥翻译才发现有这么个坑。</p>
<p>然后读入数据有点麻烦，总之就是我最不擅长的东西，还有要记得是逆时针方向，搜的时候。然后我就因为不明原因一直爆内存。。。。后来的后来，把原本读入字符数组的部分改成读字符串后不知道为什么就过了。。。。白白D了那么久的bug了。。。。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">20</span>;

<span class="keyword">struct</span> pt{
    <span class="keyword">int</span> x, y;
};

<span class="keyword">int</span> n, ans, vx, vy;
<span class="keyword">bool</span> vis[MN][MN];
<span class="keyword">int</span> dx[] = {<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>};
<span class="keyword">int</span> dy[] = {<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>};
pt a[MN*MN];
<span class="keyword">char</span> c[] = {<span class="string">'R'</span>, <span class="string">'T'</span>, <span class="string">'L'</span>, <span class="string">'B'</span>}, b[MN];
<span class="built_in">queue</span>&lt;pt&gt; q;

<span class="function"><span class="keyword">bool</span> <span class="title">comp</span><span class="params">(<span class="keyword">const</span> pt &amp;pa, <span class="keyword">const</span> pt &amp;pb)</span> </span>{
    <span class="keyword">if</span> (pa.x != pb.x) <span class="keyword">return</span> pa.x &lt; pb.x;
    <span class="keyword">return</span> pa.y &lt; pb.y;
}

<span class="function"><span class="keyword">void</span> <span class="title">bfsa</span><span class="params">()</span> </span>{
    pt now, next;
    <span class="built_in">string</span> dir;
    <span class="keyword">while</span> (!q.empty()) {
        now = q.front();
        a[ans] = now;
        <span class="built_in">cin</span> &gt;&gt; dir;
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dir.length() - <span class="number">1</span>; i++) {
            <span class="keyword">char</span> tc = dir[i];
            <span class="keyword">int</span> j;
            <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) {
                <span class="keyword">if</span> (c[j] == tc) <span class="keyword">break</span>;
            }
            next.x = now.x + dx[j];
            next.y = now.y + dy[j];
            q.push(next);
        }
        q.pop();
        ans++;
    }
}

<span class="function"><span class="keyword">void</span> <span class="title">bfsb</span><span class="params">()</span> </span>{
    pt now, next;
    <span class="keyword">while</span> (!q.empty()) {
        now = q.front();
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) {
            <span class="keyword">int</span> tx = now.x + dx[i];
            <span class="keyword">int</span> ty = now.y + dy[i];
            <span class="keyword">if</span> (vis[tx][ty] == <span class="number">1</span>) {
                <span class="built_in">cout</span> &lt;&lt; c[i];
                vis[tx][ty] = <span class="number">0</span>;
                next.x = tx;
                next.y = ty;
                q.push(next);
            }
        }
        ans++;
        <span class="keyword">if</span> (ans != n)
            <span class="built_in">cout</span> &lt;&lt; <span class="string">",\n"</span>;
        <span class="keyword">else</span>
            <span class="built_in">cout</span> &lt;&lt; <span class="string">".\n"</span>;
        q.pop();
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">string</span> s;
    getline(<span class="built_in">cin</span>, s);
    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span>(vis));
    pt k;
    <span class="keyword">if</span> (s.find(<span class="string">' '</span>) != <span class="built_in">string</span>::npos) {
        s.copy(b, s.find(<span class="string">' '</span>), <span class="number">0</span>);
        vx = atoi(b);
        s.copy(b, <span class="number">100</span>, s.find(<span class="string">' '</span>) + <span class="number">1</span>);
        vy = atoi(b);
        pt k;
        k.x = vx;
        k.y = vy;
        q.push(k);
        bfsa();
        sort(a, a+ans, comp);
        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; endl;
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans; i++)
            <span class="built_in">cout</span> &lt;&lt; a[i].x &lt;&lt; <span class="string">' '</span> &lt;&lt; a[i].y &lt;&lt; endl;
    } <span class="keyword">else</span> {
        n = atoi(s.c_str());
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {
            <span class="built_in">cin</span> &gt;&gt; k.x &gt;&gt; k.y;
            vis[k.x][k.y] = <span class="number">1</span>;
            <span class="keyword">if</span> (i == <span class="number">0</span>) {
                q.push(k);
                <span class="built_in">cout</span> &lt;&lt; k.x &lt;&lt; <span class="string">' '</span> &lt;&lt; k.y &lt;&lt; endl;
                vis[k.x][k.y] = <span class="number">0</span>;
            }
        }
        ans = <span class="number">0</span>;
        bfsb();
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/05/timus_1008_image-encoding/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/04/tyvj_p1297/">Tyvj_P1297 - 小气的小B</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Fri Jul 04 2014 06:34:13 GMT+0800">
	
		    Jul 04, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>经典问题，RMQ，不过为了增加一下文章长度，我打算贴一下题目</p>
<p>描述 Description</p>
<p>其实你们都不知道，小B是很小气的。一天小B带着他的弟弟小B’一起去摘果子，走着走着，他们忽然发现了一颗长满了果子的树。由于弟弟长得太矮了，弟弟只有让哥哥小B帮他摘一些果子下来。哥哥小B说:”弟弟啊，不是我不想给你摘多，我只是一次拿不了那么多，昨天晚上又没睡好，只能上一次树。所以哥哥只能给你摘一个哈。”没办法，弟弟只有答应了这个要求。<br>于是几下小B就上了树，树上的果子还真多，有N个呢！！但是小B很快发现这些果子大小不一。抠门的小B就想给自己拿个最大的，给弟弟拿个最小的果子。但是由于树上有些果子太高，小B不一定可以够着，所以他给你选了P个可以够着的果子区间，让你在这些区间里面找一个最大的果子和一个最小的果子。</p>
<p>输入格式 InputFormat</p>
<p>共p+2行，<br>第一行为n和p，<br>第二行为区间[1,n]的果子大小（用正整数表示）<br>后面p行形如a b，意为每次询问的区间的左界和右界</p>
<p>输出格式 OutputFormat</p>
<p>共p行，第i行为第i次询问时得到的最大值以及最小值（一个询问用空格空开max和min）</p>
<p>【注意】在输入数据中果子的大小是无序的。</p>
<p>样例输入 SampleInput [复制数据]</p>
<p>5 2<br>1 3 2 4 5<br>1 4<br>2 5</p>
<p>样例输出 SampleOutput [复制数据]</p>
<p>4 1<br>5 2</p>
<p>数据范围和注释 Hint</p>
<p>【数据范围】<br>保证果子大小不超过maxlongint<br>40%的数据：  1&lt;=n,p&lt;=1,000<br>100%的数据：1&lt;=n&lt;=50,000<br>1&lt;=p&lt;=20,000</p>
<p>有很多种解法啦，线段树也可以，之前我还写过一篇<a href="http://sillyplus.com/2013/06/98/" target="_blank" rel="external">块状数组</a>的也能解决这个问题，然后就是今天复习了一下st算法，所以就用st写了，关于st算法的话可以看看Archive里面的模版。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">50010</span>;

<span class="keyword">int</span> st[MN][<span class="number">32</span>][<span class="number">2</span>];
<span class="keyword">int</span> a[MN], pl[MN];
<span class="keyword">int</span> n, m;

<span class="function"><span class="keyword">void</span> <span class="title">stp</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{
    pl[<span class="number">1</span>] = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) {
        pl[i] = pl[i-<span class="number">1</span>];
        <span class="keyword">if</span> ((<span class="number">1</span> &lt;&lt; (pl[i]+<span class="number">1</span>)) == i) {
            pl[i]++;
        }
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = n-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {
        st[i][<span class="number">0</span>][<span class="number">0</span>] = st[i][<span class="number">0</span>][<span class="number">1</span>] = a[i];
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; (i + (<span class="number">1</span> &lt;&lt; j) - <span class="number">1</span>) &lt; n; j++) {
            st[i][j][<span class="number">0</span>] = max(st[i][j-<span class="number">1</span>][<span class="number">0</span>], st[i + (<span class="number">1</span> &lt;&lt; (j-<span class="number">1</span>))][j-<span class="number">1</span>][<span class="number">0</span>]);
            st[i][j][<span class="number">1</span>] = min(st[i][j-<span class="number">1</span>][<span class="number">1</span>], st[i + (<span class="number">1</span> &lt;&lt; (j-<span class="number">1</span>))][j-<span class="number">1</span>][<span class="number">1</span>]);
        }
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {
        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);
    }
    stp(n);
    <span class="keyword">int</span> l, r, len, k, mx, mi;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) {
        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;l, &amp;r);
        l--;
        r--;
        len = r-l+<span class="number">1</span>;
        k = pl[len];
        mx = max(st[l][k][<span class="number">0</span>], st[r-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k][<span class="number">0</span>]);
        mi = min(st[l][k][<span class="number">1</span>], st[r-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k][<span class="number">1</span>]);
        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, mx, mi);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/04/tyvj_p1297/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/03/tyvj_p1323/">Tyvj_P1323 - 识别水果</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Jul 03 2014 16:14:02 GMT+0800">
	
		    Jul 03, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>本来说好的每日一题解，因为下午睡了一觉醒来发现已经快十点了，然后才开始做题。。然后发现现在已经过了十二点了。。。</p>
<p>题目可以在这里看：<a href="http://www.tyvj.cn/Problem_Show.aspx?id=1323" target="_blank" rel="external">传送门</a></p>
<p>然后这可以说是一道陈年老题了，我从高中的时候就打算要写，然后一直拖到现在-_-#，根据题意很容易想到可以用并查集来解决，我们可以添加一个节点0，然后有毒的水果都合并到0，然后最后统计一下有多少水果是有毒的就行了。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">10010</span>;

<span class="keyword">char</span> a[<span class="number">30</span>], b[<span class="number">30</span>];
<span class="keyword">int</span> n, m, k, p;
<span class="keyword">int</span> f[MN];

<span class="function"><span class="built_in">string</span> <span class="title">cv</span><span class="params">(<span class="built_in">string</span> s)</span> </span>{
    <span class="built_in">string</span> ret = <span class="string">""</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) {
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; j++)
            <span class="keyword">if</span> (s[i] == a[j]) {
                ret += b[j];
                <span class="keyword">break</span>;
            }
    }
    <span class="keyword">return</span> ret;
}

<span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> v)</span> </span>{
    <span class="keyword">return</span> f[v] = f[v] == v ? v : find(f[v]);
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; a;
    <span class="built_in">cin</span> &gt;&gt; b;
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)
        f[i] = i;
    <span class="built_in">string</span> s;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) {
        <span class="built_in">cin</span> &gt;&gt; k &gt;&gt; s;
        s = cv(s);
        <span class="keyword">int</span> t = s.find(<span class="string">"poison"</span>);
        <span class="keyword">if</span> (t &lt; s.length())
            f[k] = <span class="number">0</span>;
    }
    <span class="built_in">cin</span> &gt;&gt; p;
    <span class="keyword">int</span> x, y;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; p; i++) {
        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;
        <span class="keyword">int</span> fx = find(x), fy = find(y);
        <span class="keyword">if</span> (fx == <span class="number">0</span> || fy == <span class="number">0</span>) {
            f[fx] = <span class="number">0</span>;
            f[fy] = <span class="number">0</span>;
        } <span class="keyword">else</span> {
            f[fx] = fy;
        }
    }
    <span class="keyword">int</span> ans = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {
        f[i] = find(i);
        <span class="keyword">if</span> (f[i] == <span class="number">0</span>) ans++;
    }
    <span class="built_in">cout</span> &lt;&lt; n-ans &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>ps：我这哪还是在写题解。。。这样下去真的可以吗T^T</p>

                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/03/tyvj_p1323/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/02/timus_1727_znaikas-magic-numbers/">Timus_1727_Znaika&#39;s Magic Numbers</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Wed Jul 02 2014 00:00:00 GMT+0800">
	
		    Jul 02, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>题目大意：给你一个N (0 &lt; N &lt; 10^5)，把N分解成若干个不相同且值不超过10^5的整数的各个位数的和，例如：N＝17时有，17 ＝ 7 ＋ 1 ＋ 2 ＋ 4 ＋ 3，所以17可以分解成7， 12， 43，这三个不同的整数。</p>
<p>题目其实是比较简单的，解法也有很多种，我就说一个我认为比较有趣的解法。我们可以每次把N加到所求的整数集合里面，然后再把N减去自身各位数字的和得到新的N’，直到N等于零。正确性也很容易验证，注意到我们每次往集合里添加的数必然都是递减的，这就保证了无重复数字的出现，然后按照生成的规则可知，减到N为0的时候自然集合里的所有数的各位数字之和就为最初的N了。</p>
<p>其他解法：比如说先把1～99999，每个数的位数和算出来，然后排个序，然后就由大到小减等等。。。</p>
<p>烂烂的还是贴下代码。。。。。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;
<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator its;

<span class="function"><span class="keyword">int</span> <span class="title">ds</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    <span class="keyword">int</span> ret = <span class="number">0</span>;
    <span class="keyword">while</span> (x) {
        ret += (x % <span class="number">10</span>);
        x /= <span class="number">10</span>;
    }
    <span class="keyword">return</span> ret;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="keyword">int</span> n;
    <span class="built_in">cin</span> &gt;&gt; n;
    <span class="keyword">while</span> (n) {
        v.push_back(n);
        n -= ds(n);
    }
    <span class="built_in">cout</span> &lt;&lt; v.size() &lt;&lt; endl;
    <span class="keyword">for</span> (its = v.begin(); its != v.end(); its++)
        <span class="built_in">cout</span> &lt;&lt; *its &lt;&lt; <span class="string">' '</span>;
    <span class="built_in">cout</span> &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/02/timus_1727_znaikas-magic-numbers/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/01/timus_1028_1318/">Timus 1028 1318 [树状数组]</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Tue Jul 01 2014 03:56:24 GMT+0800">
	
		    Jul 01, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <h4 id="除草向"><em>除草向</em></h4><p>博客好久没有更新了，自从打完补选赛之后就一直一副颓废状态，外加要期末考，得预习课内知识(虽然我到最后还是。。。)，不管怎么样，现在以及放假了，所以我打算兑现之前对自己的承诺，暑假好好做题，所以这段时间应该会比较经常更新一些水题的题解啦( ´ ▽ ` )ﾉ。昨天选拔赛第一场就爆零滚粗，作为一名候补选手，我只剩下今天这个最后一次机会了，好伤感的说T^T，希望写一写题解涨张RP。。。</p>
<p>吐槽完毕，接下来进入正题啦～ ，虽然以前偶尔也又写过树状数组的题目，不过基本就没去记住，然后每次都得看模版。。。这两天写了两三次，终于记住啦啦啦啦</p>
<ol>
<li>Star</li>
</ol>
<p>题目大衣：一个二维平面上又N (1 ≤ <em>N</em> ≤ 15000)个点(0 ≤ <em>X</em>,<em>Y</em> ≤ 32000)，然后定义每个点的level，对于点i，它的level为横纵坐标均不大于点i的点的个数。要求输出0～N-1的各个level的的点数。</p>
<p>这道题的只要求出每个点的level，统计一下就行了。然后就是求level的办法了，我们首先可以把每个点先按x递增，然后y递增的顺序排序。这样x就有序了，然后我们顺序处理每个点，对一个点Pi，已知点Pj(j&lt;i)的x不大于Pi的x，然后要做的就是统计一下Pj中y小于等于Pi的y的个数。我们用c[i]表示y为i的点的个数，Pi的level值就为sum＝ c[0] + c[1] + .. + c[y-1], 然后再更新一下c数组，c[y]+1,以上都可以用树状数组来解决。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">32001</span>;

<span class="keyword">struct</span> pt{
    <span class="keyword">int</span> x, y;
};

pt a[MN/<span class="number">2</span>];
<span class="keyword">int</span> level[MN/<span class="number">2</span>];
<span class="keyword">int</span> t[MN+<span class="number">10</span>];

<span class="function"><span class="keyword">bool</span> <span class="title">comp</span><span class="params">(<span class="keyword">const</span> pt &amp;a, <span class="keyword">const</span> pt &amp;b)</span> </span>{
    <span class="keyword">if</span> (a.x != b.x) <span class="keyword">return</span> a.x &lt; b.x;
    <span class="keyword">return</span> a.y &lt; b.y;
}

<span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    <span class="keyword">return</span> (x &amp; -x);
}

<span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> value)</span> </span>{
    <span class="keyword">for</span> (<span class="keyword">int</span> i = x; i &lt;= MN; i += lowbit(i))
        t[i] += value;
}

<span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    <span class="keyword">int</span> sum = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = x; i; i -= lowbit(i))
        sum += t[i];
    <span class="keyword">return</span> sum;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="keyword">int</span> n;
    <span class="built_in">cin</span> &gt;&gt; n;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {
        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a[i].x, &amp;a[i].y);
    }
    sort(a, a+n, comp);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {
        <span class="keyword">int</span> k = a[i].y+<span class="number">1</span>;
        level[get(k)]++;
        add(k, <span class="number">1</span>);
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)
        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, level[i]);
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><ol>
<li>Electronic Auction</li>
</ol>
<p>题目大衣：好像是拍卖铁猪来着，价格0.01～10000.00，最多两位小数。然后有几个操作：</p>
<ul>
<li>BID X   以X元竞标一头猪</li>
</ul>
<ul>
<li>DEL X  取消一个价格为X的竞标</li>
</ul>
<ul>
<li>SALE X K  以X元卖掉K头猪</li>
</ul>
<ul>
<li>QUIT  结束输入</li>
</ul>
<p>对于每一个SALE，前K个出价不小于X的客户可以得到一头猪，如果不够K个客户满足条件，自然是能买出多少就多少了，每卖出一头获利0.01，求最大获利好像差不多就是这样了把。</p>
<p>然后其实我们可以把每个数乘上100，就变成整数，不过直接这样好像会有精度问题，我因此WA了几次，后来看了讨论区，弄了个修正的办法。数组a[i]表示出价X的客户数，然后就直接套树状数组了吧，SALE的时候就是求a[i]~a[maxn],这个一个除法也就出来了。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">1000000</span>;

<span class="keyword">char</span> str[<span class="number">5</span>];
<span class="keyword">double</span> d;
<span class="keyword">int</span> f[MN+<span class="number">10</span>] = {<span class="number">0</span>};

<span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    <span class="keyword">return</span> (x &amp; -x);
}

<span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> value)</span> </span>{
    <span class="keyword">for</span> (<span class="keyword">int</span> i = x; i &lt;= MN; i += lowbit(i))
        f[i] += value;
}

<span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    <span class="keyword">int</span> sum = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = x; i; i -= lowbit(i))
        sum += f[i];
    <span class="keyword">return</span> sum;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; str;
    <span class="keyword">double</span> ans = <span class="number">0</span>;
    <span class="keyword">int</span> k;
    <span class="keyword">while</span> (str[<span class="number">0</span>] != <span class="string">'Q'</span>) {
        <span class="keyword">if</span> (str[<span class="number">0</span>] == <span class="string">'B'</span>) {
            <span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;d);
            add(<span class="keyword">int</span>(d*<span class="number">100</span> + <span class="number">0.5</span>), <span class="number">1</span>);
        } <span class="keyword">else</span> <span class="keyword">if</span> (str[<span class="number">0</span>] == <span class="string">'D'</span>) {
            <span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;d);
            add(<span class="keyword">int</span>(d*<span class="number">100</span> + <span class="number">0.5</span>), -<span class="number">1</span>);
        } <span class="keyword">else</span> <span class="keyword">if</span> (str[<span class="number">0</span>] == <span class="string">'S'</span>) {
            <span class="built_in">scanf</span>(<span class="string">"%lf%d"</span>, &amp;d, &amp;k);
            <span class="keyword">int</span> t = <span class="keyword">int</span>(d*<span class="number">100</span> + <span class="number">0.5</span>);
            <span class="keyword">int</span> ts = get(MN) - get(t-<span class="number">1</span>);
            ans += min(k, ts);
        }
        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, str);
    }
    ans /= <span class="number">100.0</span>;
    <span class="built_in">printf</span>(<span class="string">"%.2f\n"</span>, ans);
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>因为赶着要去吃饭然后打选拔赛去了，所以后面没怎么想好表达就乱写了，实在想在比赛前写完。故事不会就这样终结的，</p>

                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/01/timus_1028_1318/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-next">
            <a class="btn btn--default btn--small" href="/categories/题解/page/2/">
                    <span>下一页</span>
                <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
        </li>
        
        <li class="pagination-number">第 1 页 共 3 页</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2015 YuanJie Chen. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        <!-- Define author's picture -->


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <h4 id="about-card-name">YuanJie Chen</h4>
        
            <h5 id="about-card-bio"><p>author.bio</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </h5>
        
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js" type="text/javascript"></script>
<!--SCRIPTS END-->



</html>
