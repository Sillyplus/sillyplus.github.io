
<!DOCTYPE html>
<html lang="null">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="supernova">
    <title>标签: DP - supernova</title>
    <meta name="author" content="YuanJie Chen">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description">
<meta property="og:type" content="blog">
<meta property="og:title" content="supernova">
<meta property="og:url" content="http://github.com/sillyplus/tags/DP/index.html">
<meta property="og:site_name" content="supernova">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="supernova">
<meta name="twitter:description">
    
    
        
            <meta property="fb:admins" content="100005974902908" />
        
    
    
        <meta property="og:image" content="http://www.gravatar.com/avatar/b9c024fee19cd6eabae007b57eaf7e17?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css" type="text/css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-49870038-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">supernova</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="/#about">
        
        
            <img class="header-picture" src="http://www.gravatar.com/avatar/b9c024fee19cd6eabae007b57eaf7e17?s=90"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="2">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="http://www.gravatar.com/avatar/b9c024fee19cd6eabae007b57eaf7e17?s=110"/>
            </a>
            <span class="sidebar-profile-name">YuanJie Chen</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首页</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分类</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">标签</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">归档</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="/#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">搜索</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">关于</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/sillyplus" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://facebook.com/" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
                    <span class="sidebar-button-desc">Facebook</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://plus.google.com/" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-google-plus"></i>
                    <span class="sidebar-button-desc">Google Plus</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:oi_boy@sina.cn" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">邮箱</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    

<section class="postShorten-group main-content-wrap">
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/16/tyvj_p1309/">Tyvj_P1309_刷题的玖君</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Wed Jul 16 2014 14:40:33 GMT+0800">
	
		    Jul 16, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>描述 Description</p>
<p>某一天在网上闲逛的玖君不小心发现了TYVJ，就立刻被TYVJ吸引住了，果断驻扎下来。玖君决定按照顺序来切题，因为离复赛越来越近了，所以他希望能够用最短时间AC掉前面N道题目，完成第i道题目玖君需要花费t[i]个单位的代价。玖君做题有个特点，他喜欢看完几道题后，一次把几道题的代码写完。如果玖君决定一次写完从编号L到编号R的题目，那么他完成这些题目的总代价等于编号L到R题目的代价之和与R之积，即SUM{t[L..R]} <em>R。此外每道题在被切之前都会等待被切，等待的时间，也被算在代价里面，对于每个第k次被切的题，在它被切之前的等待代价为(k-1)</em>S。综上，切完N道题的总代价=第1次切题的代价+第2次切题的代价+…+第k次切题的代价+每道题的等待代价。现在我们想知道玖君切完这N道题目的最小代价。<br>输入格式 InputFormat</p>
<p>第1行：2个用空格分开的整数N, S<br>第2行：N个用空格分开的整数，分别表示t[1]到t[N]<br>输出格式 OutputFormat</p>
<p>第1行：1个整数，表示玖君完成N道题的最小代价<br>样例输入 SampleInput [复制数据]</p>
<p>4 7<br>8 1 7 6<br>样例输出 SampleOutput [复制数据]</p>
<p>79<br>数据范围和注释 Hint</p>
<p>[样例解释]<br>第1次切1、2、3题：代价为48<br>第2次切4题：代价为24<br>其中每道题的等待时间代价为:0,0,0,7<br>共计48 + 24 + 7 = 79</p>
<p>[数据范围]<br>对于70%的数据，1 &lt;= N &lt;= 3000<br>对于100%的数据，1 &lt;= N &lt;= 30000<br>对于100%的数据，1 &lt;= S,t[i] &lt;= 100</p>
<p>Dp，然后先求前缀和数组，方便后面用到，设f[i]表示刷完前i个题所花费的最小代价，然后一个比较容易想到的方程就是</p>
<ul>
<li>f[i]=min{f[j]+(sum[i]-sum[j])<em>i+(n-i)</em>S|0&lt;=j&lt;i} //shiugaosuyixiawo(n-i)*sshisuanfeiyongtiqianjisuanma?</li>
</ul>
<p>然后这个显然当N＝30000时是不行的，会T，然后就发现，设用k更新i比用j更优，则</p>
<ul>
<li>f[k] + (sum[i]-sum[k]) <em> i + (n-i)</em>s &gt;=f[j] + (sum[i]-sum[j]) <em> i + (n-i)</em>s</li>
</ul>
<ul>
<li>(f[k]-f[j])/(sum[k]-sum[j])&lt;=i</li>
</ul>
<p>当满足这个条件时，k优于j ，然后就维护一个队列就行了，这个是所谓的斜率优化？还是得好好消化啊，dp水平太次了我。。。</p>
<pre><code><span class="comment">#include &lt;iostream&gt;</span>
<span class="comment">#include &lt;cstdio&gt;</span>
<span class="comment">#include &lt;cmath&gt;</span>

using namespace std;

typedef long long LL;

const <span class="keyword">int</span> MN = <span class="number">30010</span>;

LL n, <span class="keyword">s</span>;
LL f[MN];
LL sum[MN];
<span class="keyword">int</span> <span class="string">q[MN]</span>;

double grad(<span class="keyword">int</span> j, <span class="keyword">int</span> k) {
    <span class="keyword">return</span> ((f[k]-f[j])*<span class="number">1.0</span> / (sum[k]-sum[j]));
}

<span class="keyword">int</span> main() {
    cin &gt;&gt; n &gt;&gt; <span class="keyword">s</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {
        scanf(<span class="string">"<span class="variable">%lld</span>"</span>, &amp;sum[i]);
        sum[i] += sum[i-<span class="number">1</span>];
    }
    <span class="keyword">int</span> h = <span class="number">1</span>, t = <span class="number">1</span>;
    f[<span class="number">0</span>] = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {
        <span class="keyword">while</span> ((h &lt; t) &amp;&amp; (grad(<span class="string">q[h]</span>, <span class="string">q[h+1]</span>) &lt;= i)) ++h;
        f[i] = f[<span class="string">q[h]</span>] + (sum[i]-sum[<span class="string">q[h]</span>])*i + (n-i)*<span class="keyword">s</span>;
        <span class="keyword">while</span> ((h &lt; t) &amp;&amp; (grad(<span class="string">q[t-1]</span>, <span class="string">q[t]</span>) &gt;= grad(<span class="string">q[t]</span>, i))) --t;
        <span class="string">q[++t]</span> = i;
    }
    cout &lt;&lt; f[n] &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/16/tyvj_p1309/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/07/16/tyvj_p1064_p1404/">Tyvj_P1064_P1404_旧题</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Wed Jul 16 2014 10:20:15 GMT+0800">
	
		    Jul 16, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>这两道题都是从我开始接触tyvj的时候就看过的，可是一直没去写，今天终于。。。</p>
<p>P1064 - 新三国争霸</p>
<p>描述 Description<br>PP 特别喜欢玩即时战略类游戏，但他觉得那些游戏都有美中不足的地方。灾害总不降临道路，而只降临城市，而且道路不能被占领，没有保护粮草的真实性。于是他就研发了《新三国争霸》。<br>在这款游戏中，加入灾害对道路的影响（也就是一旦道路W[i，j]受到了灾害的影响，那么在一定时间内，这条路将不能通过）和道路的占领权（对于一条道路W[i，j]，至少需要K[i，j]个士兵才能守住）。<br>PP可真是高手，不一会，就攻下了N-1座城市，加上原来的就有N座城市了，但他忽略了一点……那就是防守同样重要，不过现在还来的及。因为才打完仗所以很多城市都需要建设，PP估算了一下，大概需要T天。他现在无暇分身进攻了，只好在这T天内好好的搞建设了。所以他秒要派士兵占领一些道路，以确保任何两个城市之间都有路（不然敌人就要分而攻之了，是很危险的）。士兵可不是白干活的，每个士兵每天都要吃掉V的军粮。因为有灾害，所以方案可能有变化（每改变一次就需要K的军粮，初始方案也需要K的军粮）。<br>因为游戏是PP编的，所以他知道什么时候有灾害。PP可是一个很节约的人，他希望这T天在道路的防守上花最少的军粮。<br>N&lt;=300，M&lt;=5000 ，T&lt;=50；</p>
<p>输入格式 InputFormat<br>第一行有5个整数N，M，T，V，K。N表示有城市数，M表示道路数，T表示需要修养的天数，V表示每个士兵每天吃掉的军粮数，K表示修改一次花掉的军粮数。<br>以下M行，每行3个数A，B，C。表示A与B有一条路（路是双向的）需要C个士兵才能守住。<br>第M+2行是一个数P，表示有P个灾害。<br>以下P行，每行4个数，X，Y，T1，T2。表示X到Y的这条路，在T1到T2这几天都会受灾害。</p>
<p>输出格式 OutputFormat<br>T天在道路的防守上花费最少的军粮。</p>
<p>样例输入 SampleInput [复制数据]<br>3 3 5 10 30<br>1 2 1<br>2 3 2<br>1 3 4<br>1<br>1 3 2 5<br>样例输出 SampleOutput [复制数据]<br>180<br>个人感觉一道不错的动态规划题吧，一直不敢下手写，写完真是心旷神怡啊～～<br>设F[i]表示前i天的最少花费，则有<br>F[i] = min(F[i], F[j-1] + mt<em>(i-j+1)</em>v+k)<br>其中，mt表示第j天到第i天的最少花费，也就是在第j天到第i天可通行的道路求一遍最小生成树，一开始我是认为必须在第j天到第i天均不能通行的才不用排兵去收，不过事实好像是只要这期间道路遭遇灾害就可以不用派兵把守了。还是说是我没读懂题意</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MM = <span class="number">5050</span>;
<span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1000000000</span>;

<span class="keyword">struct</span> edge{
    <span class="keyword">int</span> x, y, w;
    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> edge &amp; a) <span class="keyword">const</span> {
        <span class="keyword">return</span> w &lt; a.w;
    }
} e[MM];

<span class="keyword">int</span> n, m, t, v, k, p;
<span class="keyword">bool</span> can[MM], road[MM][MM];
<span class="keyword">int</span> f[MM/<span class="number">10</span>], fa[MM];

<span class="function"><span class="keyword">int</span> <span class="title">getfa</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    <span class="keyword">return</span> (fa[x] == x ? x : fa[x] = getfa(fa[x]));
}

<span class="function"><span class="keyword">int</span> <span class="title">kruskal</span><span class="params">(<span class="keyword">int</span> t1, <span class="keyword">int</span> t2)</span> </span>{
    <span class="built_in">memset</span>(can, <span class="literal">true</span>, <span class="keyword">sizeof</span>(can));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">for</span> (<span class="keyword">int</span> j = t1; j &lt;= t2; j++)
            <span class="keyword">if</span> (!road[i][j]) {
                can[i] = <span class="literal">false</span>;
                <span class="keyword">break</span>;
            }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        fa[i] = i;
    <span class="keyword">int</span> ret = <span class="number">0</span>, cnt = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">if</span> (can[i]) {
            <span class="keyword">int</span> f1 = getfa(e[i].x);
            <span class="keyword">int</span> f2 = getfa(e[i].y);
            <span class="keyword">if</span> (f1 != f2) {
                fa[f1] = f2;
                ret += e[i].w;
                cnt++;
                <span class="keyword">if</span> (cnt == n-<span class="number">1</span>)
                    <span class="keyword">return</span> ret;
            }
        }
    <span class="keyword">return</span> INF;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; t &gt;&gt; v &gt;&gt; k;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;e[i].x, &amp;e[i].y, &amp;e[i].w);
    sort(e+<span class="number">1</span>, e+<span class="number">1</span>+m);
    <span class="built_in">cin</span> &gt;&gt; p;
    <span class="built_in">memset</span>(road, <span class="literal">true</span>, <span class="keyword">sizeof</span>(road));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; p; i++) {
        <span class="keyword">int</span> x, y, t1, t2;
        <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;x, &amp;y,&amp;t1, &amp;t2);
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)
            <span class="keyword">if</span> (((e[j].x == x) &amp;&amp; (e[j].y == y)) || ((e[j].x == y) &amp;&amp; (e[j].y == x))) {
                <span class="keyword">for</span> (<span class="keyword">int</span> tt = t1; tt &lt;= t2; tt++)
                    road[j][tt] = <span class="literal">false</span>;
            }
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++)
        f[i] = INF;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++)
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)
            f[i] = min(f[i], f[j-<span class="number">1</span>]+kruskal(j, i)*(i-j+<span class="number">1</span>)*v+k);
    <span class="built_in">cout</span> &lt;&lt; f[t] &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>P1404 - [NOIP2010]引水入城</p>
<p>noip的题目，所以网上一堆题解，所以就贴一下自己的代码就好了</p>
<p>主要就是由一个证明说某蓄水池在最后一排城市可到达的是一个连续的区间，然后就可以从第一排开始dfs求出对应区间的左右边界，然后就是一个最小区间覆盖吧，然后数据好像之后500，DP一下就行，然后好像关于最小区间覆盖的话是有一个贪心的解法。以后再想想看。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">510</span>;

<span class="keyword">int</span> n, m, root;
<span class="keyword">int</span> dx[] = {<span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>};
<span class="keyword">int</span> dy[] = {-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>};
<span class="keyword">int</span> a[MN][MN];
<span class="keyword">int</span> l[MN], r[MN], f[MN];
<span class="keyword">bool</span> vis[MN][MN];
<span class="keyword">bool</span> last[MN];

<span class="function"><span class="keyword">bool</span> <span class="title">ck</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{
    <span class="keyword">return</span> (x &gt; <span class="number">0</span> &amp;&amp; y &gt; <span class="number">0</span> &amp;&amp; x &lt;= n &amp;&amp; y &lt;= m);
}

<span class="function"><span class="keyword">void</span> <span class="title">sc</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{
    vis[x][y] = <span class="literal">true</span>;
    <span class="keyword">if</span> (x == n) {
        last[y] = <span class="literal">true</span>;
        l[root] = min(l[root], y);
        r[root] = max(r[root], y);
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) {
        <span class="keyword">int</span> tx = x + dx[i];
        <span class="keyword">int</span> ty = y + dy[i];
        <span class="keyword">if</span> (ck(tx, ty)) {
            <span class="keyword">if</span> ((a[x][y] &gt; a[tx][ty]) &amp;&amp; (!vis[tx][ty]))
                sc(tx, ty);
        }
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)
        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)
            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][j]);
    <span class="built_in">memset</span>(last, <span class="literal">false</span>, <span class="keyword">sizeof</span>(last));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MN; i++)
        l[i] = MN;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">if</span> ((a[<span class="number">1</span>][i] &gt;= a[<span class="number">1</span>][i-<span class="number">1</span>]) &amp;&amp; (a[<span class="number">1</span>][i] &gt;= a[<span class="number">1</span>][i+<span class="number">1</span>])) {
            <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));
            root = i;
            sc(<span class="number">1</span>, i);
    }
    <span class="keyword">int</span> ans = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">if</span> (!last[i]) ans++;
    <span class="keyword">if</span> (ans) {
        <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; endl &lt;&lt; ans &lt;&lt; endl;
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    f[<span class="number">0</span>] = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        f[i] = MN;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)
        <span class="keyword">for</span> (<span class="keyword">int</span> j = l[i]; j &lt;= r[i]; j++)
            f[j] = min(f[j], f[l[i]-<span class="number">1</span>] + <span class="number">1</span>);
    <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; endl;
    <span class="built_in">cout</span> &lt;&lt; f[m] &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/07/16/tyvj_p1064_p1404/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/04/17/poj-3420-quad-tiling/">Poj 3420 Quad Tiling 状压DP＋矩阵</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Apr 17 2014 07:22:39 GMT+0800">
	
		    Apr 17, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>可以理解为2663的加强版，多了些状态，代码基本参考了别人的，各种位运算。。。。因为N比较大，所以，矩阵乘法的优势就体现出来了，不过这个代码感觉速度还不是很快啊</p>
<pre><code><span class="comment">//</span>
<span class="comment">//  main.cpp</span>
<span class="comment">//  p3420</span>
<span class="comment">//</span>
<span class="comment">//  Created by Silly on 13-12-26.</span>
<span class="comment">//  Copyright (c) 2013年 Silly. All rights reserved.</span>
<span class="comment">//</span>

<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;

<span class="keyword">struct</span> mt {
    ll ma[<span class="number">16</span>][<span class="number">16</span>];
};

mt res, tmp;

<span class="keyword">int</span> N, M;
<span class="keyword">int</span> bit[<span class="number">4</span>];

<span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{
    <span class="built_in">memset</span>(res.ma, <span class="number">0</span>, <span class="keyword">sizeof</span>(res.ma));
    <span class="built_in">memset</span>(tmp.ma, <span class="number">0</span>, <span class="keyword">sizeof</span>(tmp.ma));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) {
        res.ma[i][i] = <span class="number">1</span>;
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) {
        bit[i] = (<span class="number">1</span> &lt;&lt; i);
    }
}

<span class="function"><span class="keyword">void</span> <span class="title">set_mat</span><span class="params">()</span> </span>{
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) {
        tmp.ma[i][(~i)&amp;<span class="number">0xF</span>]++;
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) {
            <span class="keyword">if</span> ( ((~i)&amp;bit[j]&amp;<span class="number">0xF</span>) == <span class="number">0</span> &amp;&amp; ((~i)&amp;bit[j+<span class="number">1</span>]&amp;<span class="number">0xF</span>) == <span class="number">0</span>) {
                tmp.ma[i][((~i)|bit[j]|bit[j+<span class="number">1</span>]) &amp; <span class="number">0xF</span>]++;
            }
        }
    }
    tmp.ma[<span class="number">15</span>][<span class="number">15</span>]++;
}

<span class="function">mt <span class="title">mm</span><span class="params">(mt a, mt b)</span> </span>{
    mt c;
    <span class="built_in">memset</span>(c.ma, <span class="number">0</span>, <span class="keyword">sizeof</span>(c.ma));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) {
        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">16</span>; k++) {
            <span class="keyword">if</span> (a.ma[i][k]) {
                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++) {
                    c.ma[i][j] += a.ma[i][k] * b.ma[k][j];
                }
            }
        }
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) {
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt; <span class="number">16</span>; j++) {
            c.ma[i][j] %= M;
        }
    }
    <span class="keyword">return</span> c;
}

<span class="function"><span class="keyword">void</span> <span class="title">mat_pw</span><span class="params">()</span> </span>{
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">31</span>; i++) {
        <span class="keyword">if</span> (N &amp; (<span class="number">1</span> &lt;&lt; i))
            res = mm(res, tmp);
        tmp = mm(tmp, tmp);
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span>
</span>{
    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;N, &amp;M) &amp;&amp; N|M) {
        init();
        set_mat();
        mat_pw();
        <span class="built_in">printf</span>(<span class="string">"%lldn"</span>, res.ma[<span class="number">15</span>][<span class="number">15</span>]);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/04/17/poj-3420-quad-tiling/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/04/17/neerc-2000-central-subregional/">NEERC 2000 Central Subregional 简要题解</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Apr 17 2014 01:07:13 GMT+0800">
	
		    Apr 17, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>题目链接：<a href="http://acm.timus.ru/problemset.aspx?space=1&amp;page=1" target="_blank" rel="external">戳我</a>（1053－1059）</p>
<p><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1053" target="_blank" rel="external">Pinocchio</a></p>
<p>题目还比较好理解，每次选两个数，大数减去小数，相等则合并，其实就是求出所有数的最大公约数，然后就是直接做了。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{
    <span class="keyword">return</span> y == <span class="number">0</span> ? x : gcd(y, x % y);
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="keyword">int</span> n, ans, k;
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; ans;
    n--;
    <span class="keyword">while</span> (n--) {
        <span class="built_in">cin</span> &gt;&gt; k;
        ans = gcd(ans, k);
    }
    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1054" target="_blank" rel="external">Hanoi Tower</a></p>
<p>汉诺塔是很经典的一个东西了，但这道题还是比较有意思的。给出当前各个圆盘所在的柱子的一个序列，问你当前状态是最优移动方案里面的第几步，有可能所给状态不是最优方案里的状态，N&lt;=31。如果对汉诺塔得递归性质理解得比较深的话应该很容易就能做出来，我是先打了一个表看看规律的。。。我们可以只考虑最大的圆盘k，如果还没有被移动过就无视，不然ans就加上2ˆ(k-1)，然后逆着递归回去，然后明显就是O(N)了。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">int</span> f[<span class="number">100</span>] = {<span class="number">0</span>}, n, ans = <span class="number">0</span>;

<span class="function"><span class="keyword">void</span> <span class="title">sol</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span> </span>{
    <span class="keyword">if</span> (k == <span class="number">0</span>) <span class="keyword">return</span>;
    <span class="keyword">if</span> (f[k] == c) {
        ans = -<span class="number">1</span>;
        <span class="keyword">return</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span> (f[k] == b) {
        ans += <span class="number">1</span> &lt;&lt; (k-<span class="number">1</span>);
        sol(k-<span class="number">1</span>, c, b, a);
    } <span class="keyword">else</span> sol(k-<span class="number">1</span>, a, c, b);
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">cin</span> &gt;&gt; f[i];
    sol(n, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);
    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1055" target="_blank" rel="external">Combinations</a></p>
<p>很裸的数学题了，组合数的计算，对分式上下各个数进行质因数分解，最后统计一下，不过我好像写得比较矬，应该写得更简洁些才是啊。。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">50010</span>;

<span class="keyword">bool</span> valid[MN];
<span class="keyword">int</span> ans[MN] = {<span class="number">0</span>};
<span class="keyword">int</span> f[MN] = {<span class="number">0</span>};

<span class="function"><span class="keyword">void</span> <span class="title">getPrime</span><span class="params">(<span class="keyword">int</span> n)</span> </span>{
    <span class="keyword">int</span> tot = <span class="number">0</span>;
    <span class="built_in">memset</span>(valid, <span class="literal">true</span>, <span class="keyword">sizeof</span>(valid));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) {
        <span class="keyword">if</span> (valid[i]) ans[++tot] = i;
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; ((j &lt;= tot) &amp;&amp; (i*ans[j] &lt;= n)); j++) {
            valid[i*ans[j]] = <span class="literal">false</span>;
            <span class="keyword">if</span> (i % ans[j] == <span class="number">0</span>) <span class="keyword">break</span>;
        }
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="keyword">int</span> n, m;
    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;
    <span class="keyword">if</span> (m &gt; (n/<span class="number">2</span>)) m = n-m;
    getPrime(n);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) {
        <span class="keyword">int</span> t = n-i;
        <span class="keyword">if</span> (valid[t]) {
            f[t]++;
        } <span class="keyword">else</span> {
            <span class="keyword">int</span> j = <span class="number">0</span>;
            <span class="keyword">while</span> (t != <span class="number">1</span>) {
                j++;
                <span class="keyword">while</span> (t % ans[j] == <span class="number">0</span>) {
                    f[ans[j]]++;
                    t /= ans[j];
                }
            }
        }
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= m; i++) {
        <span class="keyword">if</span> (valid[i]) {
            f[i]--;
        } <span class="keyword">else</span> {
            <span class="keyword">int</span> j = <span class="number">0</span>, t = i;
            <span class="keyword">while</span> (t != <span class="number">1</span>) {
                j++;
                <span class="keyword">while</span> (t % ans[j] == <span class="number">0</span>) {
                    f[ans[j]]--;
                    t /= ans[j];
                }
            }
        }
    }
    <span class="keyword">int</span> ans = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)
        <span class="keyword">if</span> (f[i]) ans++;
    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1056" target="_blank" rel="external">Computer Net</a></p>
<p>N(&lt;=10000)点构成一颗树，要求出树的中心。由树的性质可以知道，中心必定是1 or 2个。求树的中心还有树的直径都是很经典的问题，这道题也有很多做法。我用的是两边DFS，任意选则一个点v做一遍DFS，则离v最远的那个点必定是树的直径的一个端点，然后再由得到的端点做一遍DFS，就找到了另一个端点了，记录路径，然后再找到直径的中点就行了。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">10010</span>;

<span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; a[MN];
<span class="keyword">bool</span> vt[MN];
<span class="keyword">int</span> f[MN];

<span class="keyword">int</span> n, k, l, v;

<span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> pr, <span class="keyword">int</span> de)</span> </span>{
    vt[x] = <span class="literal">true</span>;
    f[x] = pr;
    <span class="keyword">if</span> (de &gt; l) {
        l = de;
        v = x;
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a[x].size(); i++) {
        <span class="keyword">int</span> ch = a[x][i];
        <span class="keyword">if</span> (vt[ch]) <span class="keyword">continue</span>;
        dfs(ch, x, de+<span class="number">1</span>);
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) {
        <span class="built_in">cin</span> &gt;&gt; k;
        a[k].push_back(i);
        a[i].push_back(k);
    }
    v = l = <span class="number">0</span>;
    <span class="built_in">memset</span>(vt, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vt));
    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>);
    <span class="built_in">memset</span>(vt, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vt));
    l = <span class="number">0</span>;
    dfs(v, <span class="number">0</span>, <span class="number">1</span>);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; l/<span class="number">2</span>; i++)
        v = f[v];
    <span class="keyword">if</span> (l % <span class="number">2</span>)
        <span class="built_in">cout</span> &lt;&lt; f[v] &lt;&lt; endl;
    <span class="keyword">else</span>
        <span class="built_in">cout</span> &lt;&lt; min(v, f[v]) &lt;&lt; <span class="string">" "</span> &lt;&lt; max(v, f[v]) &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1057" target="_blank" rel="external">Amount of Degrees</a></p>
<p>数位统计</p>
<p>题目大意：给出区间［X,Y］,要求算出区间内可以表示为k个不相同的b的幂的和的数字的个数。具体参见：刘聪《浅谈数位类问题》，讲的肯定比我自己说的要好TAT</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">int</span> x, y, k, b;

<span class="keyword">int</span> c[<span class="number">32</span>][<span class="number">32</span>] = {<span class="number">0</span>};
<span class="keyword">int</span> dgt[<span class="number">32</span>] = {<span class="number">0</span>};

<span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{
    c[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">32</span>; i++) {
        c[i][<span class="number">0</span>] = c[i-<span class="number">1</span>][<span class="number">0</span>];
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)
            c[i][j] += c[i-<span class="number">1</span>][j-<span class="number">1</span>] + c[i-<span class="number">1</span>][j];
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    <span class="keyword">int</span> l = <span class="number">0</span>, ans = <span class="number">0</span>;
    <span class="keyword">while</span> (x) {
        dgt[++l] = x % b;
        x /= b;
    }
    <span class="keyword">int</span> mk = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &gt; <span class="number">0</span>; i--) {
        <span class="keyword">if</span> (dgt[i] &gt; <span class="number">1</span>) {
            ans += c[i][k-mk];
            <span class="keyword">break</span>;
        } <span class="keyword">else</span> <span class="keyword">if</span> (dgt[i] == <span class="number">1</span>) {
            <span class="keyword">if</span> (i &gt; k-mk) ans += c[i-<span class="number">1</span>][k-mk];
            <span class="keyword">if</span> (++mk &gt; k) <span class="keyword">break</span>;
        }
        <span class="keyword">if</span> ((i == <span class="number">1</span>) &amp;&amp; (mk == k)) ans++;
    }
    <span class="keyword">return</span> ans;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y &gt;&gt; k &gt;&gt; b;
    init();
    <span class="built_in">cout</span> &lt;&lt; cal(y) - cal(x-<span class="number">1</span>) &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1058" target="_blank" rel="external">Chocolate</a></p>
<p>比较那个的计算几何，我还不会写计算几何的题目，先留个坑，以后再填</p>
<pre><code><span class="comment">//占位-_-#</span>
</code></pre><p><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1059" target="_blank" rel="external">Expression</a></p>
<p>题目大意：输出一个一元N次多项式的最短后缀表达式。然后有</p>
<p><img src="http://upload.wikimedia.org/math/d/2/5/d25290170053cbfe1d467c061e2a3e38.png" alt="f(x)=a_0x^n+a_{1}x^{n-1}+a_{2}x^{n-2}+......+a_{n-2}x^2+a_{n-1}x+a_n">  可以化成</p>
<p><img src="http://upload.wikimedia.org/math/7/5/1/7514d392c909ec6ba2fec54d5e4a7b29.png" alt="f(x)=(((a_nx+a_{n-1})x+a_{n-2})x+......+a_1)x+a_0"></p>
<p>然后规律就很明显了，直接输出就行了。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="keyword">int</span> n;
    <span class="built_in">cin</span> &gt;&gt; n;
    <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; endl;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) {
        <span class="built_in">cout</span> &lt;&lt; <span class="string">'X'</span> &lt;&lt; endl &lt;&lt; <span class="string">'*'</span> &lt;&lt; endl &lt;&lt; i+<span class="number">1</span> &lt;&lt; endl &lt;&lt; <span class="string">'+'</span> &lt;&lt; endl;
    }
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/04/17/neerc-2000-central-subregional/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/04/15/msl/">最大/小连续子序列和</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Tue Apr 15 2014 09:48:02 GMT+0800">
	
		    Apr 15, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>给定一个序列，要求出一段连续的子序列，是的其和最大或最小。</p>
<p>这是一个很经典的问题，最近做了相关的题目，在这里总结一下。</p>
<p>最直接的一个想法自然是直接暴力枚举每个子段，O(N³)，用前缀和优化一下，这样做的复杂度是O(n²)。在n比较小的时候自然是这种简单易得的方法最好啦。但是人生就是这样子，总不能让你事事如意。然后呢，我们就需要一些更快的方法。</p>
<p>然后我们就发现呢，可以用简单的DP求解，f[i]表示以第i个数为结尾的最大连续子序列和，则可以得到</p>
<p>f[i] = max{f[i-1]+a[i], a[i]}</p>
<p>求最小值自然也可以用同样的方法，这样做的复杂度是O(n)。</p>
<p>看这道题：Sicily p1888:<a href="http://soj.me/1888" target="_blank" rel="external">Circular Sequence</a></p>
<p>题目大意是：给定一个整数的循环序列，求其最大连续子序列和。</p>
<p>对于循环序列，我们一般用的方法是把整个序列复制一遍加到原序列后面，这样这个问题就转化成求得到的新序列的长度不超过原长n的最大连续子序列和(好绕口。。。。)，这个问题我们在后面讨论。这里其实我们可以不利用序列是循环的这个性质，那就只是普通的最大和问题，我们就可以用上面的方法求一遍得到Ans1，然后考虑一下循环的话，那么最大子序列必定是由原序列的一个前缀和一个后缀组成。然后可以发现，剩下的中间那部分其实就是最小连续子序列，所以我们由第二个数到倒数第二个数求一遍最小和(＊)，得到Ans2。最后的答案就是max(Ans1，Sum－ Ans2)。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">100000</span>;

<span class="keyword">int</span> a[MN];
<span class="keyword">int</span> n = <span class="number">0</span>, t;

<span class="function">LL <span class="title">max_sum</span><span class="params">()</span> </span>{
    LL ret = a[<span class="number">0</span>];
    LL tmp = a[<span class="number">0</span>];
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) {
        <span class="keyword">if</span> (tmp &lt; <span class="number">0</span>) {
            tmp = a[i];
        } <span class="keyword">else</span> {
            tmp += a[i];
        }
        ret = max(ret, tmp);
    }
    <span class="keyword">return</span> ret;
}

<span class="function">LL <span class="title">min_sum</span><span class="params">()</span> </span>{
    <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) {
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    LL ret = a[<span class="number">1</span>];
    LL tmp = a[<span class="number">1</span>];
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; n-<span class="number">1</span>; i++) {
        <span class="keyword">if</span> (tmp &gt; <span class="number">0</span>) {
            tmp = a[i];
        } <span class="keyword">else</span> {
            tmp += a[i];
        }
        ret = min(ret, tmp);
    }
    <span class="keyword">return</span> ret;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{
    <span class="built_in">cin</span> &gt;&gt; t;
    <span class="keyword">while</span> (t--) {
        <span class="built_in">cin</span> &gt;&gt; n;
        LL sum = <span class="number">0</span>;
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++){
            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);
            sum += a[i];
        }
        LL ans = max(max_sum(), sum - min_sum());
        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>在西西里上一开始用I64d输出，一直WA。。。时不时总要被这样的东西坑一下TAT</p>
<p>－－－－－－－－－－－－－－－我是华丽的分割线－－－－－－－－－－－－－－－</p>
<p>接着填一下上面留下的坑。</p>
<p>在求子序列和的时候，如果给定子序列长度的上下界又该怎么做。</p>
<p>同样使用动态规划的解法，我们可以列出方程f[i] = max{sum[i] - min(sum[j - 1])} ，这样做是O(n²),显然不是我们想要的，然后呢我们就可以用单调队列来优化啦～</p>
<p>对于长度的上界MX就是直接的来咯，然后下界MI就利用一个小技巧，从MI开始枚举，然后i-MI入队，这样就保证了序列的长度不小于MI了，每次更新完队首就是符合条件的min(sum[j - 1])了。如果还是不大理解具体可以看代码理解一下。</p>
<p>这里求的是最小连续子序列和：Sicily p1800 <a href="http://soj.me/1800" target="_blank" rel="external">Sequence</a></p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = (<span class="number">1</span> &lt;&lt; <span class="number">15</span>) + <span class="number">10</span>;

<span class="keyword">int</span> sum[MN] = {<span class="number">0</span>};
<span class="keyword">int</span> f[MN] = {<span class="number">0</span>};

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="keyword">int</span> n, l, r, mi, mx, ans, k;
    <span class="built_in">cin</span> &gt;&gt; n;
    <span class="keyword">while</span> (n) {
        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;mi, &amp;mx);
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {
            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;k);
            sum[i] = sum[i-<span class="number">1</span>] + k;
        }
        l = r = <span class="number">0</span>;
        f[++r] = <span class="number">0</span>;
        ans = <span class="number">2147483647</span>;
        <span class="keyword">for</span> (<span class="keyword">int</span> i = mi; i &lt;= n; i++) {
            <span class="keyword">while</span> (l &lt; r &amp;&amp; i - f[l+<span class="number">1</span>] &gt; mx) l++;
            <span class="keyword">while</span> (l &lt; r &amp;&amp; sum[f[r]] &lt;= sum[i-mi]) r--;
            f[++r] = i - mi;
            ans = min(ans, sum[i] - sum[f[l+<span class="number">1</span>]]);
        }
        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);
        <span class="built_in">cin</span> &gt;&gt; n;
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/04/15/msl/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2014/04/15/codeforces-401d-roman-and-numbers/">Codeforces 401D Roman and Numbers</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Tue Apr 15 2014 09:35:56 GMT+0800">
	
		    Apr 15, 2014
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>简要题意：给定n，m，<em>n</em> (1 ≤ <em>n</em> &lt; 10ˆ18) and <em>m</em> (1 ≤ <em>m</em> ≤ 100).求满足以下要求的数x有多少个。</p>
<ul>
<li>x可通过重排n的各位数字获得</li>
</ul>
<ul>
<li>x没有前导0</li>
</ul>
<ul>
<li>x mod m == 0</li>
</ul>
<p>一开始我被10ˆ18给吓到了，但是其实这里也是一个突破口来着，仔细想想，如果是2ˆ18的话那该多好。</p>
<p>如果你往这个方向开始去想了，就会发现很多东西了，然后就是个DP，然后再去一下重，当然，你也可以在DP的过程中去重。</p>
<p>不过，感觉我的DP水平实在是不济，这个是赛后搞出来的。。。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = (<span class="number">1</span> &lt;&lt; <span class="number">18</span>) + <span class="number">3</span>;

<span class="keyword">long</span> <span class="keyword">long</span> f[MN][<span class="number">103</span>];
<span class="keyword">int</span> dig[<span class="number">20</span>] = {<span class="number">0</span>};
<span class="keyword">char</span> c[<span class="number">20</span>];
<span class="keyword">long</span> <span class="keyword">long</span> fac[<span class="number">20</span>];
<span class="keyword">unsigned</span> <span class="keyword">long</span> l;
<span class="keyword">int</span> m;

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span>
</span>{
    <span class="built_in">cin</span> &gt;&gt; c &gt;&gt; m;
    l = <span class="built_in">strlen</span>(c);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++) {
        dig[c[i] - <span class="string">'0'</span>]++;
    }
    fac[<span class="number">0</span>] = <span class="number">1</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">20</span>; i++) {
        fac[i] = fac[i - <span class="number">1</span>] * i;
    }
    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; s &lt; (<span class="number">1</span> &lt;&lt; l); s++) {
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++) {
            <span class="keyword">if</span> (f[s][j]) {
                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++) {
                    <span class="keyword">if</span> (~s &amp; (<span class="number">1</span> &lt;&lt; i)) {
                        <span class="keyword">if</span> (!s &amp;&amp; c[i] == <span class="string">'0'</span>) {
                            <span class="keyword">continue</span>;
                        }
                        f[s | (<span class="number">1</span> &lt;&lt; i)][(j * <span class="number">10</span> + c[i] - <span class="string">'0'</span>) % m] += f[s][j];
                    }
                }
            }
        }
    }
    <span class="keyword">long</span> <span class="keyword">long</span> ans = f[(<span class="number">1</span> &lt;&lt; l) - <span class="number">1</span>][<span class="number">0</span>];
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {
        ans /= fac[dig[i]];
    }
    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2014/04/15/codeforces-401d-roman-and-numbers/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/12/26/poj-2663-tri-tiling/">Poj 2663 Tri Tiling 构造矩阵＋矩阵乘法</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Dec 26 2013 01:36:29 GMT+0800">
	
		    Dec 26, 2013
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>题目大意是一个3<em>N的棋盘，用1</em>2的骨牌覆盖的方案数</p>
<p>使用一个三位的二进制数表示状态，则可以有：</p>
<p>n行：000  ……………………………………. 000</p>
<p>n-1行：000  001  010   011…………………  111</p>
<p>为避免状态重复，我们不允许在n-1行上平放骨牌（因为等会由n-1行转移的第n行时，我们可以在n行上平放），所以我们可以构造一个矩阵来表示这些转移（具体自己画一画就知道了），即可以得到以下矩阵A：</p>
<p>0000000100000010000001000000100100010000001000000100000110010010然后求A的n次幂，A^n[7][7]就是我们要的答案啦～</p>
<p>至于矩阵方面的一些知识，可以看一下Matrix67的这篇文章：<a href="http://www.matrix67.com/blog/archives/276" target="_blank" rel="external">十个利用矩阵乘法解决的经典题目</a></p>
<pre><code><span class="comment">//</span>
<span class="comment">//  main.cpp</span>
<span class="comment">//  p2663</span>
<span class="comment">//</span>
<span class="comment">//  Created by Silly on 13-12-26.</span>
<span class="comment">//  Copyright (c) 2013年 Silly. All rights reserved.</span>
<span class="comment">//</span>

<span class="preprocessor">#<span class="keyword">include</span></span>
<span class="preprocessor">#<span class="keyword">include</span></span>
<span class="preprocessor">#<span class="keyword">include</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span>  ll;

<span class="keyword">const</span> ll  mat[<span class="number">8</span>][<span class="number">8</span>] = {
    {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>},
    {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>},
    {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>},
    {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>},
    {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>},
    {<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>},
    {<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>},
    {<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>},
};

<span class="keyword">struct</span> ma {
    ll a[<span class="number">8</span>][<span class="number">8</span>];
};

ma res, tmp;

<span class="function">ma <span class="title">mm</span><span class="params">(ma x, ma y)</span> </span>{
    ma z;
    <span class="built_in">memset</span>(z.a ,<span class="number">0</span> , <span class="keyword">sizeof</span>(z.a));
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) {
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">8</span>; j++) {
            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">8</span>; k++) {
                z.a[i][j] += x.a[i][k] * y.a[k][j];
            }
        }
    }
    <span class="keyword">return</span> z;
}

<span class="function">ma <span class="title">mp</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{
    ma z;
    <span class="keyword">if</span> (x == <span class="number">1</span>) {
        <span class="keyword">return</span> res;
    }
    z = mp(x / <span class="number">2</span>);
    z = mm(z, z);
    <span class="keyword">if</span> (x % <span class="number">2</span> != <span class="number">0</span>) {
        z = mm(res, z);
    }
    <span class="keyword">return</span> z;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span>
</span>{
    <span class="keyword">int</span> n;
    <span class="built_in">cin</span> &gt;&gt; n;
    <span class="keyword">while</span> (n != -<span class="number">1</span>) {
        <span class="keyword">if</span> (n == <span class="number">0</span>) {
            <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; endl;
            <span class="built_in">cin</span> &gt;&gt; n;
            <span class="keyword">continue</span>;
        }
        <span class="built_in">memset</span>(res.a, <span class="number">0</span>, <span class="keyword">sizeof</span>(res.a));
        <span class="built_in">memset</span>(tmp.a, <span class="number">0</span>, <span class="keyword">sizeof</span>(tmp.a));
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) {
            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">8</span>; j++) {
                res.a[i][j] = mat[i][j];
            }
        }
        tmp = mp(n);
        <span class="built_in">printf</span>(<span class="string">"%lldn"</span>, tmp.a[<span class="number">7</span>][<span class="number">7</span>]);
        <span class="built_in">cin</span> &gt;&gt; n;
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2013/12/26/poj-2663-tri-tiling/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/2013/10/26/codeforces-358d-dima-and-hares/">Codeforces 358D Dima and Hares</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sat Oct 26 2013 00:00:00 GMT+0800">
	
		    Oct 26, 2013
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/题解/">题解</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p>题目大意：Dima送给他女友N只兔子，编号1-n（n&lt;=3000）,当给兔子喂食时，它们会产生joy值，joy的取值有三种状态：<br>1.当前兔子左右两边都没有已经喂过的兔子；<br>2.当前兔子左右两边有且仅有一边有已经喂过的兔子；<br>3.当前兔子左右两边的兔子均已喂过。（编号1，n的兔子显然无法满足）<br>现给出每只兔子三种状态下的joy值，希望你帮助Dima的女友有Inna选择某种喂食顺序，使得总的joy值最大，仅输出最大的joy值。</p>
<p>这个问题可以采用动态规划的方法来解决，为什么呢？<br>注意到，每只兔子选取的joy值仅与它左右两边的兔子的状态有关，当前兔子的状态也仅影响到它左右两边的兔子（-.-||好吧，这是显然的)<br>我们用f[i]来表示前i只兔子喂完时的最大joy值，但是i的状态跟i+1有关，我们应该如何表示呢？这里有个我觉得很巧妙的办法，就是我们先假设出i+1的状态进行求解。因此，我们增加一维，用f[i][0]表示喂食第i只兔子时第i+1只兔子还没有喂过,f[i][1]表示喂食第i只兔子时第i+1只兔子已经喂过了，这样我们就能很容易从f[i][]跟f[i-1][]得出喂食i时 i-1, i+1,处于的状态了。自然的就得到状态转移方程。</p>
<p>状态转移：<br>f[i][0] = max(f[i-1][0]+a[i][1], f[i-1][1]+a[i][0])<br>f[i][1] = max(f[i-1][0]+a[i][2], f[i-1][1]+a[i][1])</p>
<p>显然最后的答案就是f[n][0]<br>复杂度应该是O(N)吧</p>
<p>总结：感觉这道题目还是很有趣的（对我这种傻×来说）。可说到底这还是一道水题，虽然比赛的时候我看到题目就想到了DP，但显然DP能力太弱了（真的是跪到不行T^T），没有想出来给怎么表示状态，然后我选择了放弃思考。。。（提醒自己：可以放弃治疗，决不能放弃思考。说不定就想出来了）果然是智商问题，外加做过的题太少。。。最后是看了liympanda大神的代码,然后理解出来上面那堆东西，能力有限，写得不好望见谅。</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span></span>
<span class="preprocessor">#<span class="keyword">include</span></span>
<span class="preprocessor">#<span class="keyword">include</span></span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> MN = <span class="number">3200</span>;

<span class="keyword">int</span> a[MN][<span class="number">3</span>] = {<span class="number">0</span>};
<span class="keyword">int</span> f[MN][<span class="number">2</span>] = {<span class="number">0</span>};
<span class="keyword">int</span> n, ans;

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="built_in">cin</span> &gt;&gt; n;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][<span class="number">0</span>]);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][<span class="number">1</span>]);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][<span class="number">2</span>]);
    f[<span class="number">0</span>][<span class="number">0</span>] = a[<span class="number">0</span>][<span class="number">0</span>]; f[<span class="number">0</span>][<span class="number">1</span>] = a[<span class="number">0</span>][<span class="number">1</span>];
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) {
        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">2</span>; j++) {
            f[i][j] = <span class="number">0</span>;
            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">2</span>; k++) {
                 <span class="keyword">if</span> (f[i - <span class="number">1</span>][k] + a[i][<span class="number">1</span> - k + j] &gt; f[i][j])
                    f[i][j] = f[i - <span class="number">1</span>][k] + a[i][<span class="number">1</span> - k + j];
            }
        }
    }
    ans = f[n - <span class="number">1</span>][<span class="number">0</span>];
    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
                        
                            

                        
                        
                            <p>
                                <a href="/2013/10/26/codeforces-358d-dima-and-hares/#post-footer" class="postShorten-excerpt_link link">
                                    注释和共享
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 页 共 1 页</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2015 YuanJie Chen. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        <!-- Define author's picture -->


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="http://www.gravatar.com/avatar/b9c024fee19cd6eabae007b57eaf7e17?s=110"/>
        
            <h4 id="about-card-name">YuanJie Chen</h4>
        
            <h5 id="about-card-bio"><p>author.bio</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                China
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js" type="text/javascript"></script>
<!--SCRIPTS END-->



</html>
